
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta content="云服务器、云主机、弹性计算、云存储、开放存储、OSS、ACE、数据库、mysql、RDS、SQLSERVER、开发者、负载均衡、防攻击、防DDOS攻击、云监控、云浏览器、云地图、云邮箱、phpwind、阿里云、云产品、云计算、多线带宽、BGP、服务器环境配置、ShopEx、Hishop、V5Shop、ShopNC、ECShop、phpwind、DedeCMS、马克威、禾唐ERP、办公软件、渲染云、云手机、云盾、应用托管、云引擎" name="keywords" />
<meta content="云产品解决方案，开发者合作平台，站长云集平台" name="description" />
<title>阿里云-用户中心</title>
<link rel="shortcut icon" href="/images/favicon.ico" type="image/x-icon" />
<style>
body {font-family: "\5FAE\8F6F\96C5\9ED1", "Microsoft Yahei", "Hiragino Sans GB", tahoma, arial, "\5B8B\4F53" !important;}
</style>
<link rel="stylesheet" type="text/css" href="https://static.aliyun.com/??css/account/base.css,css/account/style.css?v=20990113" />
<link rel="stylesheet" type="text/css" href="https://static.aliyun.com/??css/www-summerwind/shared.css,css/www-summerwind/base.css?v=20990113" />
<link rel="stylesheet" type="text/css" href="https://static.aliyun.com/??css/user-center/base.css,css/user-center/cp.css?v=20990113" />
<link rel="stylesheet" type="text/css" href="https://static.aliyun.com/??css/common/alipw_skin.css,css/user-center/account.css?v=20990113" />
<link rel="stylesheet" type="text/css" href="https://static.aliyun.com/??css/www-knight/dpl/widget/footer.css?v=20990113" /><link rel="stylesheet" href="https://static.aliyun.com/??css/www-knight/dpl/dpl.css,css/user-center/user-center/uc-head.css,css/user-center/user-center/uc-layout.css?version=20990113" />
<script src="https://static.aliyun.com/??js/lib/alipw/baselib/baselib-all.js,js/user-center/user-center/uc-head-account.js,js/user-center/user-center/uc-layout.js?v=20990113"></script>
<!--[if lte IE 7]>
<link rel="stylesheet" type="text/css" href="https://static.aliyun.com/??css/www-knight/dpl/modules/iconfont-ie7.css" charset="utf-8"/>
<script src="https://static.aliyun.com/js/www-knight/dpl/iconfont-ie7.js?v=20990113"></script>
<![endif]-->
<style>
body{font-family: "\5FAE\8F6F\96C5\9ED1", "Microsoft Yahei", tahoma, arial, "Hiragino Sans GB", "\5B8B\4F53";}
</style>
 <script type="text/javascript" src="https://static.aliyun.com/js/lib/alipw/classes/alipw-base.js?v=20990111"></script>
    <script type="text/javascript" src="https://static.aliyun.com/js/common/alipw_config.js?v=20990111"></script>
    <script type="text/javascript" src="https://static.aliyun.com/js/www-summerwind/common.js?v=20130813"></script>
<!--[if lte IE 8]>
<script src="https://static.aliyun.com/js/html5.js"></script>
<![endif]-->
<style type="text/css">
    .contactTable{
        margin-top:12px;
    }
    .contactTable tr{
        border:1px solid #ccc;
        border-width:0 1px;
    }
    .contactTable tr td{
        height:27px;
        line-height: 27px;
		word-wrap:break-word;
		word-break:break-all;
		overflow:hidden;
    }
    .contactTable tr td:first-child,.contactTable tr th:first-child{
        padding-left:24px;
    }
    .contactTable tr:first-child td:first-child{
        padding-left:10px;
    }
    .contactTable thead tr{
        border-top:1px solid #ccc;
    }
    .contactTable tfoot{
        margin-top: 10px;
    }
    tr{
        border-left: none;
        border-right: none;
    }
    tr.tbspacer{
        border-width:1px 0 !important;
    }
    tr.tbspacer td{
        border:none;
        height:0px;
    }
    tr.add-tr{
        border-bottom-width:1px !important;
        background-color: #f6fff1;
    }
    .inline-block{
        display: inline-block;
        *display: inline;
        *zoom:1;
    }
    .error-tips{
		display:none;
        position: absolute;
        background-color:#fffdf1;
        border:1px solid #facc80;
        padding:4px 9px;
        color:#ff0000;
        font-weight: bold;
        -webkit-border-radius: 3px;
        -moz-border-radius: 3px;
        border-radius: 3px;
    }
    
    .error-tips .arrow,.error-tips .arrow em,.error-tips .arrow span{
        position: absolute;
        font-family: 'SimSun', 'Hiragino Sans GB';
        font-style: normal;
        width: 14px;
        height: 21px;
        line-height: 21px;
        z-index: 10;
    }
    .error-tips .arrow{
         left:10px;
         bottom:-12px
    }
    .error-tips .arrow em{
        left:0;
        bottom:0px;
        color:#facc80;
    }
    .error-tips .arrow span{
        left:0;
        bottom:1px;
        color:#fffdf1;
    }
    .count-tip{
		display: none;
        background-color: #fffef1;
        text-align: center;
        border:1px solid #ffecbd;
        height:48px;
        line-height: 48px;
    }
	.successtip{
        display: none;
        background: #ECF5CF url(https://static.aliyun.com/images/user-center/tick_small.gif) no-repeat 10px 6px;
        border: 1px solid #99CC00;
        border-radius: 3px;
        color: #090;
        padding: 5px 10px 5px 35px;
        margin: 30px 0;
    }
    .errortip{
        display: none;
        background: #ECF5CF url(https://static.aliyun.com/images/user-center/cross_small.gif) no-repeat 10px 6px;
        background-color: #fffef1;
        border:1px solid #ffecbd;
        border-radius: 3px;
        padding: 5px 10px 5px 35px;
        margin: 30px 0;
    }
	    .app-type li{
        padding-bottom: 11px;
        margin-bottom: 11px;
        border-bottom: 1px solid #e3e3e3;
    }
    .form .field .content label{
        width:108px;
        display: inline-block;
        *display: inline;
        *zoom:1;
    }
    .form hr{
        border: none;
        border-top: 1px dotted #ccc;
        margin:20px 0;
    }
</style>
</head>

<body class="page-account"><script type="text/javascript">
(function (d) {
var t=d.createElement("script");t.type="text/javascript";t.async=true;t.id="tb-beacon-aplus";
t.setAttribute("exparams","category=&userid=&aplus&yunid=%22feilongzaitian%40163%2ecom%22");
t.src=("https:"==d.location.protocol?"https://s":"http://a")+".tbcdn.cn/s/aplus_v2.js";
d.getElementsByTagName("head")[0].appendChild(t);
})(document);
</script>

<!-- 页头 S -->
<div class="hd-simple">
        <div class="y-row hd-layer">
            <div class="y-span3">
                <a class="aliyun-logo" href="http://www.aliyun.com/" title="打造数据分享第一平台" target="_blank" hidefocus>
                    <i class="icon-logo2" title="阿里云"></i>
                    <span>打造数据分享第一平台</span>
                </a>
            </div>
            <div class="y-span9 y-last">
                <a class="lnk-email" href="http://mail.aliyun.com/" title="云邮箱登录" target="_blank" hidefocus>云邮箱登录</a>
                <span class="li-spacing"></span>
                <a class="lnk-act" href="http://www.aliyun.com/act/webbaindex.html" title="备案" target="_blank" hidefocus>备案</a>
                <span class="li-spacing"></span>
                <a class="lnk-renewals" href="http://buy.aliyun.com/renew/ecs" title="续费" target="_blank" hidefocus>续费</a>
                <span class="li-spacing"></span>
                <a class="lnk-try" href="http://try.aliyun.com/" title="免费试用" target="_blank" hidefocus>免费试用</a>
                <span class="li-spacing"></span>
                <div class="aliyun-user y-hide">
                    <a class="lnk-user load-hide" href="http://i.aliyun.com" target="_self" hidefocus>
                        <span><span class="user-uid">AliyunUser</span></span>
                        <i></i>	    		
                    </a>
                    <div class="user-list">
                      <ul>
                          <li>
                              <a href="http://console.aliyun.com/" title="" target="_blank" hidefocus>管理控制台</a>
                          </li>
                          <li>
                              <a href="javascript:;" title="" target="_self" hidefocus>退出</a>
                          </li>
                      </ul>
                  </div>
                </div>
                <div class="aliyun-login y-hide">
                    <a class="lnk-reg load-hide" href="javascript:;" target="_self" hidefocus>
                        <span>注册</span>	    		
                    </a>
                    <span class="li-spacing"></span>
                    <a class="lnk-login load-hide" href="javascript:;" target="_self" hidefocus>
                        <span>登录</span>	    		
                    </a>
                </div>
            </div>
        </div>
    </div>
<!-- 页头 E -->


        <div class="uc-nv" data-spm="1996032021">
    <div class="y-row uc-layer">
        <div class="y-span3">
            <h1 class="uc-title" title="阿里云－用户中心">用户中心</h1>
            <a class="lnk-www-uesr-center" href="http://www.net.cn/core/customer/index" title="万网用户中心" hidefocus>去万网用户中心</a>
        </div>
        <div class="y-span9 y-last">
            <div class="uc-nav-list">
                <ul>
                    <li>
                        <a class="nav-aftersalessupport  " href="workorder.html" target="_self" title="售后支持" hidefocus>售后支持</a>
                    </li>
                    <li>
                        <a class="nav-recordmanagement  " href="bsn.html" target="_self" title="备案管理" hidefocus>备案管理</a>
                    </li>
                    <li>
                        <a class="nav-myservice  " href="renew_ecs.html" target="_self" title="我的服务" hidefocus>我的服务</a>
                    </li>
                    <li>
                        <a class="nav-consumerrecords  " href="order.html" target="_self" title="消费记录" hidefocus>消费记录</a>
                    </li>
                    <li>
                        <a class="nav-accountmanagement " href="account.html" target="_self" title="账户管理" hidefocus>账户管理</a>
                    </li>
                    <li>
                        <a class="nav-userinfo  current " href="profile.html" target="_self" title="会员信息" hidefocus>会员信息</a>
                    </li>
                    <li>
                        <a class="nav-index " href="index.html" target="_self" title="用户中心首页" hidefocus>首页</a>
                    </li>
                </ul>
                <div class="uc-current-light uc-current-light-hide"></div>
            </div>
        </div>
    </div>
</div>
<div class="uc-bd"><div class="y-row uc-layer"><div class="y-span2"><div class="uc-menu">
<div class="menu-box">
    <div class="menu-title">会员信息管理</div>
                            <div class="menu-options">
                <a class="menu-options-title  " href="profile.html" target="_self" hidefocus>安全信息 
                </a>
                            </div>
            <div class="menu-options-hr"></div>
                                <div class="menu-options">
                <a class="menu-options-title  " href="accountInfo.html" target="_self" hidefocus>基本资料 
                </a>
                            </div>
            <div class="menu-options-hr"></div>
                                <div class="menu-options">
                <a class="menu-options-title    current " href="contacter.html" target="_self" hidefocus>联系人管理 
                </a>
                            </div>
            <div class="menu-options-hr"></div>
                                <div class="menu-options">
                <a class="menu-options-title  " href="certify.html" target="_self" hidefocus>实名认证 
                </a>
                            </div>
            <div class="menu-options-hr"></div>
            </div>
</div></div>
<div class="y-span10 y-last">
<div class="uc-content">
<link rel="stylesheet" type="text/css" href="https://static.aliyun.com/??css/account/base.css,css/account/style.css?v=20990113" />
<link rel="stylesheet" type="text/css" href="https://static.aliyun.com/??css/www-summerwind/shared.css,css/www-summerwind/base.css?v=20990113" />
<link rel="stylesheet" type="text/css" href="https://static.aliyun.com/??css/user-center/base.css,css/user-center/cp.css?v=20990113" />
<link rel="stylesheet" type="text/css" href="https://static.aliyun.com/??css/common/alipw_skin.css,css/user-center/account.css?v=20990113" />
<link rel="stylesheet" type="text/css" href="https://static.aliyun.com/??css/www-knight/dpl/widget/footer.css?v=20990113" /><style>
.aliyun-form-wrap .btn {background-image: none;}
</style>
<link rel="stylesheet" type="text/css" href="https://static.aliyun.com/css/new-common/common.css?v=20990113">
<link rel="stylesheet" type="text/css" href="https://static.aliyun.com/css/user-center/mprofile.css?v=20990113">
<style>
.uitopb h3 {
    font-weight:bold;
}
</style>
<div id="main" >
 	<input type="hidden" name="_csrf_token_" value="_csrf_tk_1136100756298025"  />
    <div id="content" class="mt20" style="width:810px;">
            <div class="uitopg">
                <h3 class="uitopg-title">
                    <span class="left">联系方式</span>
                </h3>
                <!--新添加------------------------------------>

                <div id="" class="contactTable tabledv">
                    <table>
                        <thead>
                            <tr>
                                <th class="taleft" width="20%">姓名</th>
                                <th class="taleft" width="20%">邮箱</th>
                                <th class="taleft" width="20%">手机</th>
                                <th class="taleft" width="25%">职位</th>
                                <th class="taleft" width="15%">操作</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="alt">
                                <td><img src="/images/T1yuJVFapaXXc9v57_-10-10.png" alt="帐号联系人"/> 飞龙在天</td>
                                <td>honn****@163.com</td>
                                <td>138****8888</td>
                                <td>帐号联系人</td>
                                <td><a href="/profile/profile.htm" class="J_modify_account">修改帐号信息</a></td>
                            </tr>
														                            
                            <tr class="tbspacer"><td colspan="5"></td></tr>
                            <tr id="J_add_tr" class="add-tr">
                                <td><input class="fm-text" type="text" size="4" placeholder="姓名" /></td>
                                <td><input class="fm-text" type="text" size="" placeholder="邮箱"/></td>
                                <td><input class="fm-text" type="text" size="12" placeholder="手机"/></td>
                                <td>
									<select><option value="">请选择职位</option>
									<option value="技术负责人">技术负责人</option><option value="运维负责人">运维负责人</option><option value="项目负责人">项目负责人</option><option value="财务负责人">财务负责人</option><option value="CEO">CEO</option><option value="其它">其它</option>									</select> 
									
								</td>
                                <td><a class="J_add btn left btn-white"><span>添加</span></a></td>
                            </tr>
                        </tbody>
                    </table>
					<div class="successtip">成功</div>
                    <div class="errortip">失败</div>
                    <div id="J_count_tip" class="count-tip">
                        <span class="inline-block  ico ico-warning" style="">联系人已达20个，不能再添加</span>
                    </div>
                </div>
                <div style="margin-top:28px;">
                    注：阿里云不会将这些信息对外披露或向第三方提供。
                </div>




                <!-------------------------------------------->
            </div>
        </div>
    </div>
	
	 <!------错误提示组件------>
        <div class="error-tips">
            <div class="arrow">
                <em>◆</em>
                <span>◆</span>
            </div>
            <div class="error-text">试一下看看这个tips</div>
        </div>
        
        </div>
        </div>
        </div>
        </div>
</body>

<script type="text/javascript">


$(function(){
    Alipw.importClass('Alipw.Window');
	var addUrl = "/contacter/add.json";
	var deleteUrl = "/contacter/del.json";
	var updateUrl = "/contacter/update.json";
	var getUrl = "/contacter/get_type.json";
	var csrf_token = $("input[name=_csrf_token_]").val();
	var selectHtml = '<select><option value="">请选择职位</option><option value="技术负责人">技术负责人</option><option value="运维负责人">运维负责人</option><option value="项目负责人">项目负责人</option><option value="财务负责人">财务负责人</option><option value="CEO">CEO</option><option value="其它">其它</option></select>';
    //点击修改把当前行变为可编辑状态
    

	function showErrorMessage(code) {
        var errorMessage = new Array();
        errorMessage[1013] = "联系人已达20个，不能再添加";
        errorMessage[1001] = "请填写联系人姓名";
        errorMessage[1002] = "联系人姓名格式不正确。请重新输入联系人姓名（2－12字符；包括汉字、英文）";
        errorMessage[1003] = "邮箱或手机号至少需填写一项";
        errorMessage[1004] = "您填写的邮箱地址不正确";
        errorMessage[1005] = "您填写的手机号码不正确";
        errorMessage[1006] = "职位信息有误";
        errorMessage[1007] = "接口错误";
        errorMessage[1] = "操作失败了";
        errorMessage[1011] = "联第人ID不正确";
        errorMessage[1008] = "联系人ID不能为空";
		errorMessage[2] = "更新失败了";
		errorMessage[3] = "添加失败了";
		if (code == undefined) {
			code = 1;
		}
		var _message = errorMessage[code];
        $('.errortip').show().text(_message).delay(3000).fadeOut();
    }
    function showError(input,text){
        var offset = input.offset();
        var tip = $('.error-tips').clone().appendTo(document.body).addClass('visibled-tips');
        tip.css({left:offset.left,top:offset.top - 30}).show();
        tip.find('.error-text').text(text);
        input.focus();
    }
	
    function validateItem(name,mail,mobile,post,remark) {
        // 已经显示的错误信息删除
        $('.visibled-tips').remove();
        var nameText = name.val();
        var emailText = mail.val();
        var mobileText = mobile.val();
		if (nameText == undefined) {
			nameText = "";
		}
		if (emailText == undefined) {
			emailText = "";
		}
		if (mobileText == undefined) {
			mobileText = "";
		}
		
        if(nameText == '') {
            showError(name,'请填写联系人姓名');
            return false;
        }
        if(emailText == '' && mobileText == '') {
            showError(mail,'邮箱或手机号至少需填写一项');
            return false;
        }
        if(emailText != '' && !/(.*)@(.*\.)+[A-Za-z]{1,10}/.test(emailText)) {
            showError(mail,'您填写的邮箱地址不正确');
            return false;
        }
        if(mobileText != '' && !/^[\d]{8,20}$/.test(mobileText)) {
            showError(mobile,'您填写的手机号码不正确');
            return false;
        }
        return true;
    }

    // 检查是否达到20条数量
    function checkCount() {
        var count = 20;
        var trs = $('.contactTable tbody tr');
        if(trs.length >= count) {
             $('#J_add_tr').hide();
            $('#J_count_tip').show();
        }else{
            $('#J_add_tr').show();
            $('#J_count_tip').hide();
        }
    }
	$('.J_modify').click(function(e) {
        e.preventDefault();
        var tr = $(this).parent().parent();
		var contacterId = tr.attr('data-id');
		
		jQuery.ajax({
			url:getUrl, 
			type:'POST',
			dataType:'json',
			data:{"contacter_id":contacterId, "_csrf_token_":csrf_token}, 
			success:function(data){
			var contacter = null;
				if (data.code == 0) {
					contacter = data.data;
				}
                tr.find('td').each(function(i) {
                    var text = $(this).text();
                    switch(i) {
                        case 0:
                            $(this).html('<input class="fm-text" type="text" value="'+ text +'" size="8" />');
                            break;
                        case 1:
							if (contacter != null) {text = contacter.contacterEmail;}
							if (text == undefined) {text = "";}
                            $(this).html('<input class="fm-text" type="email" value="'+ text +'" maxlength="30" />');
                            break;
                        case 2:
							if (contacter != null) {text = contacter.contacterMobile;}
							if (text == undefined) {text = "";}
                            $(this).html('<input class="fm-text" type="text" value="'+ text +'" maxlength="20" size="12" />');
                            break;
                        case 3:
                             $(this).html('');
        					 var select = $(selectHtml).appendTo(this);
        					 var option = select.find('option').filter(function() {return $(this).text() == text; }).attr('selected','selected');
        
                    }
                    
                    
                });
		},
		error:function() {
			window.location.reload();
		}
		
		});
        $(this).hide().after('<a class="J_save btn left btn-white mr10"><span>保存</span></a>');
    });
	
    // 点击保存
    $('.J_save,.J_add').live('click',function(e) {
        e.preventDefault();
        e.stopPropagation();
        var tr = $(this).parent().parent();
        var id = tr.attr('data-id');
        var tds = tr.find('td');
         var nameTD = tds.eq(0);
        var mailTD = tds.eq(1);
        var mobileTD = tds.eq(2);
        var postTD = tds.eq(3);
        var name = nameTD.find('input');
        var mail = mailTD.find('input');
        var mobile = mobileTD.find('input');
        var post = postTD.find('select');
        //数据验证
        if( !validateItem(name,mail,mobile,post) ) {
            return;
        }
        if( $(this).is('.J_save') ) {
			var _button = $(this);
            jQuery.ajax({
				url:updateUrl,
				type:"POST",
				dataType:"json",
				data:{
					"_csrf_token_":csrf_token,
					"contacter_id":id,
					"contacter_name":name.val(),
					"contacter_email":mail.val(),
					"contacter_mobile":mobile.val(),
					"contacter_position":post.val()
				},
				success:function(data) {
					if(data.code == 0) {
						jQuery.ajax({
							url:getUrl,
							type:"POST",
							dataType:"json",
							data: {"contacter_id":id, "is_hidden":1, "_csrf_token_":csrf_token}, 
							success:function(data){
							
	    						if (data.code == 0) {
									var _email = "";
									var _mobile = "";
									var _position = "";
									if (data.data.contacterEmail != undefined) {
										_email = data.data.contacterEmail;
									}
									if (data.data.contacterMobile != undefined) {
										_mobile = data.data.contacterMobile;
									}
									if (data.data.contacterPosition != undefined) {
										_position = data.data.contacterPosition;
									}
									
	                                nameTD.text(data.data.contacterName);
	                                mailTD.text(_email);
	                                mobileTD.text(_mobile);
	                                postTD.text(_position);
								} else {
									nameTD.text(name.val());
	                                mail.val() != undefined && mailTD.text(mail.val());
	                                mobile.val() != undefined && mobileTD.text(mobile.val());
	                                post.val() != undefined && postTD.text(post.val());
								}
	                            $('.successtip').show().text('保存成功').delay(3000).fadeOut();
	    						_button.prev().show();
	                        	_button.remove();
								}
						});
                    }else{
						var code = data.code;
						if (code == 1) {
							code = 2;
						}
                        showErrorMessage(code);
                    }
				},
				error:function() {
					$('.errortip').show().text('保存失败').delay(3000).fadeOut();
				}
			});
        }else if( $(this).is('.J_add') ) {
            jQuery.ajax({
				url:addUrl,
				type:"POST",
				dataType:"json",
				data:{
					"_csrf_token_":csrf_token,
					"contacter_id":id,
					"contacter_name":name.val(),
					"contacter_email":mail.val(),
					"contacter_mobile":mobile.val(),
					"contacter_position":post.val()
				},
				success:function(data) {
					if(data.code == 0) {
                        $('.successtip').show().text('添加成功');
                        location.href = location.href;
                    }else{
						var code = data.code;
						if (code == 1) {
							code = 3;
						}
                        showErrorMessage(code);
                    }
				},
				error:function() {
					window.location.reload();
				}
			});
        }else{
            
        }
    });

    // 点击删除
    Alipw.onReady(function() {
        $('.J_delete').click(function(e) {
            e.preventDefault();
			var id = $(this).attr('data-id');
            var tr = $(this).parent().parent();
            var _deleteDialog = new Alipw.Window({
                width:360,
                height:210,
                closeAction:'hide',
                modal:true,
                title:'提醒',
                buttons:[
                {
                    label:'取消',
                    cls: 'alipw-button',
                    handler: function(){
                      _deleteDialog.hide();
                    }
                },
                {
                    label:'确定',
                    handler:function() {
                      jQuery.ajax({
            			url:deleteUrl,
            			type:"POST",
            			dataType:"json",
            			data:{
            				"_csrf_token_":csrf_token,
            				"contacter_id":id
            			},
            			success:function(data) {
            				if (data.code == 0)
            				{
            					// 移除当前行
                                tr.remove();
								location.href = location.href;
            				} else {
								_deleteDialog.body.html('<span class="ico ico-error" style="margin:40px;display:block;color:red;">删除失败</span>');
            					_deleteDialog.buttonBar.remove(); 
								 _deleteDialog.delay(3000).hide();
							}
            			},
            			error:function() {
							window.location.reload();
						}
            			});
                    }
                }
                ]
            });
            var html = '<span class="ico ico-warning" style="margin:40px 100px;display:block;">确定要删除吗？</span>';
            _deleteDialog.appendChild( html );
        });
    });
});
</script>
</body>
</html>

